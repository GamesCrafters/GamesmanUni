  
name: test
on: push

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Pushing build to NYC
        uses: fifsky/ssh-action@master
        with:
          command: |
            cd /home/uni/GamesmanUni
            echo "Pulling from GitHub ---------------------------------------------------"
            git pull
            echo "Checking and installing new dependencies ------------------------------"
            yarn install
            echo "Building prod ---------------------------------------------------------"
            yarn build
            echo "Pushing to prod -------------------------------------------------------"
            sudo rsync -au /home/uni/GamesmanUni/dist/ /var/www/html/uni/
          host: nyc.cs.berkeley.edu
          user: github
          key: ${{ secrets.KEY }}
